/*! styles.less
 * 
 * NOTE: the css version of this file is auto-generated, so only edit the original 
 * less version if you don't want your changes to be overwritten.
 * 
 * Copyright (c) 2013 Travis Fischer
 */


/* **************************************************************************
                                    IMPORTS
   ************************************************************************** */


@import "common.less";

@shadow:  rgba(50, 50, 50, 0.25);


/* **************************************************************************
                                   ARTICLES
   ************************************************************************** */

@article-width: 300px;
@article-margin: 24px;

body {
    min-width: @article-width;
    overflow-x: auto;
    /*background: #efefef;*/
    background: rgba(58, 42, 45, 0.3);
}

#content {
    position: relative;
    max-width: (@article-width + @article-margin) * 4 + 110;
    min-width: @article-width;
    margin: @article-margin auto;
}

#background-canvas {
    position: fixed;
    top:  0;
    left: 0;
    
    width:  100%;
    height: 100%;
    
    pointer-events: none;
    display: none;
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
    #background-canvas {
        display: block;
    }
}

article {
    position: relative;
    
    max-height: 480px;
    overflow-x: hidden;
    overflow-y: auto;
    margin: 0 24px 24px 0;
    padding: 12px;
    float: left;
    text-align: justify;
    background: #fff;
    
    border: 1px solid #999;
    
    .transform(translateZ(0));
    .rounded(4px);
    .box-shadow(0, 2px, 25px, 0, @shadow);
    
    .title, h1, h2 {
        text-align: left;
        font: 1.8em 'Droid Sans', sans-serif;
        color: #498FF2;
    }
    
    h1 { font-size: 1.5em; }
    h2 { font-size: 1.2em; }
}

.single {
    width: @article-width;
}

.double {
    width: @article-width * 2 + @article-margin * 2;
}

.full-height {
    max-height: inherit;
}

.blur-img {
    max-width: 200px;
    margin: 0 auto;
    display: block;
}

.keyword, .code-snippet, .css-class {
    color: #ea932d;
}

.code-block {
    font-size: 80% !important;
    max-height: 30em;
}

.code-block-toggle {
    display: none;
}

.code-block-active {
    display: block;
}

.article-img-hero {
    margin: 0 0 8px 16px;
    display: block;
    float: right;
}

.article-img-small, .article-img-hero {
    max-width: 35%;
    
    .rounded(4px);
    .box-shadow(0, 0, 12px, @shadow);
}

.article-img-large {
    max-width: 80%;
}

.article-img-small, .article-img-large {
    display: block;
    margin: 4px auto;
}

.no-frills {
    .rounded(0);
    .box-shadow(0, 0, 0, #fff);
}

.article-img-ticalc {
    margin: 0 0 8px 16px;
    display: block;
    float: right;
    
    width:  160px;
    height: 100px;
}

.view-full-article {
    display: none;
    
    position: absolute;
    bottom: 0;
    left:  0;
    
    width:  100%;
    height: 2.5em;
    
    line-height: 2.5em;
    text-align: center;
    
    background: rgba(58, 42, 45, 0.85);
    
    .transition(all, 0.2s, ease-out);
    
    &:hover {
        height: 3em;
        line-height: 3em;
        font-weight: bold;
    }
}

.overflowed {
    overflow-y: hidden;
    
    .view-full-article {
        display: block;
    }
}

.fancybox-inner article {
    max-height: auto;
    width: auto;
    
    margin: 0;
    border: 0 none;
    
    .rounded(0);
    .box-shadow(0, 0, 0, 0, @shadow);
}


/* **************************************************************************
                                 PROCESSING
   ************************************************************************** */

.clear {
    clear: both;
}

.sketch {
    p {
        margin:  0;
        padding: 0;
    }
    
    .desc, .attr {
        margin-top: .5em;
    }
    
    .attr {
        font-size: 90%;
    }
}

.preview-sketch {
    display: block;
    
    width:  160px;
    height: 110px;
    margin: 1em auto .3em;
    
    border: 1px solid @shadow;
    //.box-shadow(0, 0, 6px, @shadow);
}

#preview-sketch-displaced {
    background: url(/assets/img/processing/displaced0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-gravity {
    background: url(/assets/img/processing/gravity0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-hilbert {
    background: url(/assets/img/processing/hilbert0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-intersection {
    background: url(/assets/img/processing/intersection0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-intersection2 {
    background: url(/assets/img/processing/intersection2.png) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-not_found {
    background: url(/assets/img/processing/not_found0.png) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-primordial {
    background: url(/assets/img/processing/primordial0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-rrt {
    background: url(/assets/img/processing/rrt0.png) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-substrate {
    background: url(/assets/img/processing/substrate0.png) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-tenebrous {
    background: url(/assets/img/processing/tenebrous0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-thering {
    background: url(/assets/img/processing/thering0.jpg) no-repeat;
    background-size: 100% 100%;
}

#preview-sketch-trema {
    background: url(/assets/img/processing/trema0.png) no-repeat;
    background-size: 100% 100%;
}


/* **************************************************************************
                           CRINKLED STATIC GOOGLE MAP
   ************************************************************************** */


.static-map(@size: 200px, @b: 0, @angle: 45deg, @perspective: 200px) {
    position: relative;
    display:  block;
    width:   @size;
    
    @padding: 4px;
    top:    -@padding;
    left:   -@padding;
    padding: @padding;
    
    .static-map-inner {
        margin: 0 auto;
        @colsize: @size / 4;
        
        position: relative;
        top:  0;
        left: -@b;
        
        display: block;
        width:  @size;
        height: @size;
        
        /*.perspective(@perspective);*/
        /*.transform-style(preserve-3d);
        .backface-visibility(hidden);*/
        
        ._section(@x) {
            background: url('https://maps.googleapis.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&sensor=false&scale=1&format=png&maptype=roadmap&size=144x144&key=AIzaSyAEjlMEfxmlCBQeyw_82jjobQAFjYx-Las');
            background-position: -(@x * @colsize);
            
            position: absolute;
            display:  block;
            
            width:  @colsize;
            height: @size;
            
            top: 0;
            border: @b solid #fff;
            
            //.box-shadow(0, 0, @b * 2, 0, @shadow);
            //.box-shadow(2px, 2px, 2px, 0, rgba(0, 0, 0, 0.15));
            //.transform-style(preserve-3d);
            
            .transition-transform(.1s, linear);
        }
        
        .__section(@x) when (@x > 0) {
            left: @x * @colsize + @b * 2;
        }
        .__section(@x) when (@x = 0) {
            left: @x * @colsize + @b;
        }
        
        .section(@x) {
            ._section(@x);
            .__section(@x);
        }
        
        .r0 {
            .section(0);
            
            border-width: @b 0 @b @b;
            .transform(perspective(@perspective) translate(12px, 0) rotateY(-@angle));
        }
        
        .r1 {
            .section(1);
            
            border-width: @b 0;
            .transform(perspective(@perspective) translate(7px,  0) rotateY(@angle));

        }
        
        .r2 {
            .section(2);
            
            border-width: @b 0;
            .transform(perspective(@perspective) translate(-1px, 0) rotateY(-@angle));
        }
        
        .r3 {
            .section(3);
            
            border-width: @b @b @b 0;
            .transform(perspective(@perspective) translate(-6px, 0) rotateY(@angle));
        }
        
        .dark-layer {
            display: block;
            width:  100%;
            height: 100%;
            background: #333;
            opacity: 0.1;
            
            .transition(opacity, .1s, ease-in-out);
        }
        
        .pin {
            background: url(/assets/img/pin_shadow.png);
            
            position: absolute;
            top:  50%;
            left: 50%;
            margin: -7px auto auto 0;
            
            display: block;
            width:  24px;
            height: 18px;
            
            &:hover {
                cursor: pointer;
            }
            
            .pin-inner {
                background: url(/assets/img/pin.png);
                
                position: relative;
                top:  -16px;
                left: -8px;
                
                display: block;
                width:  26px;
                height: 36px;
            }
            
            .transform(perspective(@perspective) translate(-2px, 0) scale(.8, .8));
            .transition-transform(.1s, linear);
        }
    }
    
    &:hover {
        .r0, .r1, .r2, .r3, .pin {
            .transform(perspective(@perspective));
        }
        
        .dark-layer {
            opacity: 0;
        }
    }
}

.static-map-small {
    /*.static-map(@size: 140px, @b: 2px, @angle: 35deg, @perspective: 200px)*/
    .static-map(140px, 2px, 35deg, 200px);
}

.zoom {
    position: absolute;
    z-index: 101;
    
    top:   8px;
    right: 8px;
    
    display: block;
    width:  25px;
    height: 25px;
    
    .transition(opacity, 0.2s, ease-out);
    
    background: url(/assets/img/entityimage_sprite.png) no-repeat;
    
    &:hover {
        background-position: 0 -27px;
        cursor: pointer;
    }
}

.zoom-map {
    background-position: -27px 0;
    
    &:hover {
        background-position: -27px -27px;
    }
}

article .static-map-small {
    margin: 0 auto;
}

.screenshot {
    position: relative;
    display: block;
    float: right;
    
    margin: 12px;
    width:  160px;
    height: 100px;
    
    img {
        position: absolute;
    }
    
    .animated-screenshot {
        opacity: 0;
        .transition(opacity, 0.3s, ease-out);
    }
    
    &:hover {
        .animated-screenshot {
            opacity: 1;
        }
    }
}

.link {
    margin: .5em 1.5em 0 .5em;
    min-width: 8em;
    float: left;
    
    .ss-icon {
        position: relative;
        top: .25em;
        
        font-size: 150%;
        color: #333;
        margin: 0 .5em 0;
        
        .transition(all, 0.2s, ease);
    }
    
    a:hover {
        .ss-icon {
            color: #67ADFF;
        }
    }
    
    a:active {
        .ss-icon {
            color: darken(#498FF2, 15%);
        }
    }
}

#navigation {
    position: fixed;
    top:   1em;
    right: 1em;
    z-index: 1000;
    
    .nav {
        position: relative;
        display:  block;
        
        color: #595959;
        font-size: 2.5em;
        
        .icon {
            display: block;
            
            .transform(scale(.75, .75));
            .transition-transform2(0.3s, ease-out, color, 0.3s, ease-out);
        }
        
        .desc {
            position: absolute;
            display:  block;
            
            top:  .2em;
            left: 0;
            
            font-size: .8em;
            
            opacity: 0;
            .transform(translatex(0));
            .transition(all, 0.3s, ease-out);
            
            /*@duration: 0.3s;
            @ease: ease-out;
            
            -webkit-transition: -webkit-transform @duration @ease, color @duration1 @ease1;
            -moz-transition:    -moz-transform    @duration @ease, color @duration1 @ease1;
            -ms-transition:     -ms-transform     @duration @ease, color @duration1 @ease1;
            -o-transition:      -o-transform      @duration @ease, color @duration1 @ease1;
            transition:         transform         @duration @ease, @target1 @duration1 @ease1;*/
        }
        
        &:hover {
            color: #67ADFF;
            
            .icon {
                .transform(scale(1, 1));
                .transition-transform2(0, ease-out, color, 0, ease-out);
            }
            
            .desc {
                opacity: 1;
            }
        }
    }
    
    .nav-all:hover .desc {
        .transform(translatex(-42px));
    }
    
    .nav-project:hover .desc {
        .transform(translatex(-114px));
    }
    
    .nav-article:hover .desc {
        .transform(translatex(-103px));
    }
    
    .nav-art:hover .desc {
        .transform(translatex(-110px));
    }
    
    .nav-about:hover .desc {
        .transform(translatex(-86px));
    }
}

